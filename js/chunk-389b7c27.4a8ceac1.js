(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-389b7c27"],{"00fd":function(t,a,e){var o=e("9e69"),n=Object.prototype,s=n.hasOwnProperty,i=n.toString,r=o?o.toStringTag:void 0;function c(t){var a=s.call(t,r),e=t[r];try{t[r]=void 0;var o=!0}catch(c){}var n=i.call(t);return o&&(a?t[r]=e:delete t[r]),n}t.exports=c},1310:function(t,a){function e(t){return null!=t&&"object"==typeof t}t.exports=e},1638:function(t,a,e){},"1a8c":function(t,a){function e(t){var a=typeof t;return null!=t&&("object"==a||"function"==a)}t.exports=e},"29f3":function(t,a){var e=Object.prototype,o=e.toString;function n(t){return o.call(t)}t.exports=n},"2b3e":function(t,a,e){var o=e("585a"),n="object"==typeof self&&self&&self.Object===Object&&self,s=o||n||Function("return this")();t.exports=s},3729:function(t,a,e){var o=e("9e69"),n=e("00fd"),s=e("29f3"),i="[object Null]",r="[object Undefined]",c=o?o.toStringTag:void 0;function l(t){return null==t?void 0===t?r:i:c&&c in Object(t)?n(t):s(t)}t.exports=l},"408c":function(t,a,e){var o=e("2b3e"),n=function(){return o.Date.now()};t.exports=n},"585a":function(t,a,e){(function(a){var e="object"==typeof a&&a&&a.Object===Object&&a;t.exports=e}).call(this,e("c8ba"))},"84fa":function(t,a,e){"use strict";var o=e("1638"),n=e.n(o);n.a},"9e69":function(t,a,e){var o=e("2b3e"),n=o.Symbol;t.exports=n},a69d:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashboard"},[e("dashboard-info-block"),e("div",{staticClass:"row row-equal"},[e("div",{staticClass:"flex xl8 xs12"},[e("div",{staticClass:"xl12 xs12 sm12"},[e("dashboard-tabs")],1),e("br"),e("div",{staticClass:"xl12 xs12 sm12"},[e("dashboard-table")],1)]),e("div",{staticClass:"flex xl4 xs12"},[e("dashboard-kins")],1)])],1)},n=[],s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row row-equal"},[e("div",{staticClass:"flex xl8 xs12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"flex xs12 sm4"},[e("va-card",{staticClass:"mb-4",attrs:{color:"info"}},[e("p",{staticClass:"display-2 mb-0",staticStyle:{color:"white","font-size":"28px"}},[t._v(t._s(t.package_code))]),e("p",[t._v(t._s(t.$t("dashboard.info.deposit-contribution")))])])],1),e("div",{staticClass:"flex xs12 sm4"},[e("va-card",{staticClass:"mb-4",attrs:{color:"danger"}},[e("p",{staticClass:"display-2 mb-0",staticStyle:{color:"white","font-size":"28px"}},[t._v(t._s(t._f("Currency1")(t.balance)))]),e("p",[t._v(t._s(t.$t("dashboard.info.share-capital")))])])],1),e("div",{staticClass:"flex xs12 sm4"},[e("va-card",{staticClass:"mb-4",attrs:{color:"warning"}},[e("p",{staticClass:"display-2 mb-0",staticStyle:{color:"white","font-size":"28px"}},[t._v(t._s(t._f("formatLongDate")(t.disconnection_date)))]),e("p",[t._v(t._s(t.$t("dashboard.info.outstanging-loans")))])])],1)])]),e("div",{staticClass:"flex xs12 md12 xl4"},[e("va-card",{attrs:{stripe:"info",title:t.$t("dashboard.info.latest-notification")}},[t._v(" "+t._s(t.latest_notfication.message)+" "),e("va-item-label",{attrs:{caption:""}},[t._v(" "+t._s(t._f("formatDate")(t.latest_notfication.date_sent))+" "+t._s(t.latest_notfication.time_sent)+" ")]),e("div",{staticClass:"row mt-3"},[e("va-button",{attrs:{color:"primary"},on:{click:t.viewall}},[t._v(" "+t._s(t.$t("dashboard.info.view-all"))+" ")])],1)],1)],1),e("va-modal",{attrs:{position:"top",size:"large",fullscreen:t.fullscreen,mobileFullscreen:t.fullscreenmobile,title:t.$t("notifications"),cancelClass:"none",okText:t.$t("modal.close"),cancelText:t.$t("modal.cancel")},model:{value:t.showModal,callback:function(a){t.showModal=a},expression:"showModal"}},[t._l(t.notifications,(function(a,o){return[e("va-item",[e("va-item-section",{attrs:{avatar:""}},[e("avatar",{attrs:{username:t.tostring(o+1),color:t.spinnersColor}})],1),e("va-item-section",[t._v(" "+t._s(a.message)+" "),e("va-item-label",{attrs:{caption:""}},[t._v(" "+t._s(t._f("formatDate")(a.date_sent))+" "+t._s(a.time_sent)+" ")])],1)],1)]}))],2)],1)},i=[],r=e("bc3a"),c=e.n(r),l=e("4a89"),u=e.n(l),d={components:{Avatar:u.a},name:"DashboardInfoBlock",data:function(){return{userData:JSON.parse(localStorage.getItem("LoggedUser")),token:JSON.parse(localStorage.getItem("Token")),latest_notfication:{},showModal:!1,fullscreen:!1,fullscreenmobile:!0,notifications:{},spinnersColor:"#537c3d",share:"",package_code:"",balance:"",disconnection_date:"",deposit:"",loan:"",fosa_bal:"",fosas:{},color_:"color_",color_0:this.$themes.primary,color_1:this.$themes.info,color_2:this.$themes.success,color_3:this.$themes.danger,color_4:this.$themes.warning}},methods:{tostring:function(t){return t.toString()},dynamicStyle:function(t){switch(t){case 0:return{color:this.color_0,fontSize:"20px"};case 1:return{color:this.color_1,fontSize:"20px"};case 2:return{color:this.color_2,fontSize:"20px"};case 3:return{color:this.color_3,fontSize:"20px"};case 4:return{color:this.color_4,fontSize:"20px"};default:return{color:this.color_1,fontSize:"20px"}}},GetCustomerPackage:function(){var t=this,a={headers:{Authorization:this.userData.user_id+" "+this.token}};c.a.post("".concat(t.$apiUrl,"GetCustomerPackage"),this.userData.user_id,a).then((function(a){a=a.data,t.package_code=a.package_code,t.balance=a.balance,t.disconnection_date=a.disconnection_date})).catch((function(t){console.log(t)}))},getShare:function(){var t=this,a={user:this.userData.user_id,acc_code:"SHA"},e={headers:{Authorization:this.userData.user_id+" "+this.token}};c.a.post("".concat(t.$apiUrl,"GetAnyAccountBalance"),a,e).then((function(a){a=a.data,t.share=a.acc_balance})).catch((function(t){console.log(t)}))},getLoans:function(){var t=this,a={headers:{Authorization:this.userData.user_id+" "+this.token}};c.a.post("".concat(t.$apiUrl,"GetTotalOutStandingLoans"),t.userData.user_id,a).then((function(a){a=a.data,t.loan=a.amount})).catch((function(t){console.log(t)}))},getFosaBal:function(){var t=this,a={headers:{Authorization:this.userData.user_id+" "+this.token}};c.a.post("".concat(t.$apiUrl,"GetAllFosaBalance"),t.userData.user_id,a).then((function(a){a=a.data,t.fosa_bal=a.amount})).catch((function(t){console.log(t)}))},getFosaAccs:function(){var t=this,a={headers:{Authorization:this.userData.user_id+" "+this.token}};c.a.post("".concat(t.$apiUrl,"GetFosaAccounts"),t.userData.user_id,a).then((function(a){t.fosas=a.data,localStorage.setItem("UserFosas",JSON.stringify(a.data))})).catch((function(t){console.log(t)}))},viewall:function(){this.showModal=!0},GetNotifications:function(){var t=this,a={headers:{Authorization:this.userData.user_id+" "+this.token}};c.a.post("".concat(t.$apiUrl,"GetNotifications"),t.userData.user_id,a).then((function(a){a=a.data,t.notifications=a,t.latest_notfication=a[0]})).catch((function(t){console.log(t)}))}},created:function(){this.GetCustomerPackage()}},f=d,m=(e("84fa"),e("2877")),h=Object(m["a"])(f,s,i,!1,null,null,null),b=h.exports,_=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("va-card",{attrs:{title:t.$t("dashboard.table.title")}},[e("div",{staticClass:"row align--center mb-1"},[e("div",{staticClass:"flex xs12 sm6"},[e("va-input",{staticClass:"ma-0",attrs:{value:t.term,placeholder:t.$t("tables.searchByName"),removable:""},on:{input:t.search}},[e("va-icon",{attrs:{slot:"prepend",name:"fa fa-search"},slot:"prepend"})],1)],1)]),e("va-data-table",{attrs:{fields:t.mode?t.detailedFields:t.fields,data:t.filteredData,loading:t.loading,hoverable:""},scopedSlots:t._u([{key:"posting_date",fn:function(a){return[t._v(" "+t._s(t._f("formatLongDate")(a.rowData.rcp_date))+" ")]}},{key:"description",fn:function(a){return[e("div",{staticStyle:{"text-align":"left"}},[t._v(t._s(a.rowData.rcp_description)+" - "+t._s(a.rowData.rcp_ref))])]}},{key:"amount",fn:function(a){return[e("div",{staticStyle:{"text-align":"left"}},[t._v(t._s(t._f("Currency")(a.rowData.rcp_amount)))])]}}])},[e("template",{slot:"icon"},[e("va-icon",{attrs:{name:"fa fa-list",color:"secondary"}})],1)],2)],1)},p=[],v=e("b047"),g=e.n(v),x={data:function(){return{trans:{},loading:!1,term:null,mode:0,userData:JSON.parse(localStorage.getItem("LoggedUser")),token:JSON.parse(localStorage.getItem("Token"))}},created:function(){this.getPayments()},computed:{fields:function(){return[{name:"__slot:icon",width:"30px",dataClass:"text-center"},{name:"__slot:posting_date",title:this.$t("tables.headings.date"),width:"30%",sortField:"posting_date"},{name:"__slot:description",title:this.$t("tables.headings.description"),width:"50%"},{name:"__slot:amount",title:this.$t("tables.headings.amount"),width:"20%"}]},filteredData:function(){var t=this;return!this.term||this.term.length<1?this.trans:(console.log(this.term),this.trans.filter((function(a){return a.description.toLowerCase().startsWith(t.term.toLowerCase())||a.amount.toLowerCase().startsWith(t.term.toLowerCase())})))}},methods:{getPayments:function(){var t=this,a={headers:{Authorization:this.userData.user_id+" "+this.token}};c.a.post("".concat(t.$apiUrl,"getpayments"),this.userData.user_id,a).then((function(a){a=a.data,t.trans=a.slice()})).catch((function(t){console.log(t)}))},search:g()((function(t){console.log(t),this.term=t}),400)}},k=x,y=Object(m["a"])(k,_,p,!1,null,null,null),D=y.exports,$=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("va-card",{attrs:{title:t.$t("dashboard.member-details")}},[e("va-tabs",{attrs:{grow:""},model:{value:t.tabsState,callback:function(a){t.tabsState=a},expression:"tabsState"}},[e("va-tab",[t._v(" "+t._s(t.$t("dashboard.tabs.billingAddress.bio-data"))+" ")]),e("va-tab",[t._v(" Package Details ")])],1),e("va-separator"),e(t.tabs[t.tabsState],{tag:"component",on:{submit:t.submit}})],1)},C=[],S=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"pt-2"},[e("div",{staticClass:"row"},[e("div",{staticClass:"flex xs12 md6"},[e("div",{staticClass:"title mb-3",style:t.computedStylesTitle},[t._v(" "+t._s(t.$t("dashboard.tabs.billingAddress.personalInfo"))+" ")]),e("va-input",{attrs:{label:t.$t("dashboard.tabs.billingAddress.firstName"),readonly:!0},model:{value:t.form.name,callback:function(a){t.$set(t.form,"name",a)},expression:"form.name"}}),e("va-input",{attrs:{label:t.$t("dashboard.tabs.billingAddress.email"),readonly:!0},model:{value:t.form.email,callback:function(a){t.$set(t.form,"email",a)},expression:"form.email"}}),e("va-input",{attrs:{label:t.$t("dashboard.tabs.billingAddress.id_no"),readonly:!0},model:{value:t.form.id_no,callback:function(a){t.$set(t.form,"id_no",a)},expression:"form.id_no"}}),e("va-input",{attrs:{label:t.$t("dashboard.tabs.billingAddress.phone_no"),readonly:!0},model:{value:t.form.phone_no,callback:function(a){t.$set(t.form,"phone_no",a)},expression:"form.phone_no"}})],1),e("div",{staticClass:"flex xs12 md6"},[e("div",{staticClass:"title mb-3",style:t.computedStylesTitle},[t._v(" "+t._s(t.$t("dashboard.tabs.billingAddress.saccoInfo"))+" ")]),e("va-input",{attrs:{label:"Customer number",readonly:!0},model:{value:t.form.member_no,callback:function(a){t.$set(t.form,"member_no",a)},expression:"form.member_no"}})],1)])])},w=[],O={name:"billing-address-tab",data:function(){return{form:{name:"",email:"",id_no:"",phone_no:"",member_no:"",country:"",connection:!0}}},methods:{submit:function(){this.$emit("submit",this.form)}},computed:{computedStylesTitle:function(){return{color:this.$themes.dark}}},created:function(){this.userData=JSON.parse(localStorage.getItem("LoggedUser")),this.form.name=this.userData.full_name,this.form.email=this.userData.user_email,this.form.email=this.userData.user_email,this.form.id_no=this.userData.id_number,this.form.phone_no=this.userData.mobile_number,this.form.member_no=this.userData.member_number}},N=O,A=Object(m["a"])(N,S,w,!1,null,null,null),T=A.exports,I=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"pt-2"},[e("div",{staticClass:"title text-dark mb-1",style:{color:t.$themes.primary}},[t._v(" "+t._s(t.$t("dashboard.tabs.bankDetails.detailsFields"))+" ")]),e("div",{staticClass:"row"},[e("div",{staticClass:"flex xs12 md6"},[e("va-input",{attrs:{label:t.$t("dashboard.tabs.bankDetails.bankName"),readonly:!0},model:{value:t.form.package_code,callback:function(a){t.$set(t.form,"package_code",a)},expression:"form.package_code"}})],1),e("div",{staticClass:"flex xs12 md6"},[e("va-input",{attrs:{label:t.$t("dashboard.tabs.bankDetails.accountNumber"),readonly:!0},model:{value:t.form.package_amount,callback:function(a){t.$set(t.form,"package_amount",a)},expression:"form.package_amount"}})],1)])])},j=[],z=e("a34a"),U=e.n(z);function L(t,a,e,o,n,s,i){try{var r=t[s](i),c=r.value}catch(l){return void e(l)}r.done?a(c):Promise.resolve(c).then(o,n)}function J(t){return function(){var a=this,e=arguments;return new Promise((function(o,n){var s=t.apply(a,e);function i(t){L(s,o,n,i,r,"next",t)}function r(t){L(s,o,n,i,r,"throw",t)}i(void 0)}))}}var F={name:"bank-details-tab",data:function(){return{form:{bankName:"",accountName:"",sortCode:"",package_code:"",billing_cycle:"",package_amount:"",balance:"",disconnection_date:"",accountNumber:"",notes:""},userData:{},token:JSON.parse(localStorage.getItem("Token")),fosaDetails:{}}},methods:{sendDetails:function(){this.showToast("Saved!")},GetCustomerPackage:function(){var t=this,a={headers:{Authorization:this.userData.user_id+" "+this.token}};c.a.post("".concat(t.$apiUrl,"GetCustomerPackage"),this.userData.user_id,a).then((function(a){a=a.data,t.form.package_code=a.package_code,t.form.billing_cycle=a.billing_cycle,t.form.package_amount=Math.floor(a.package_amount),t.balance=a.balance,t.disconnection_date=a.disconnection_date})).catch((function(t){console.log(t)}))},GetFosaNumberFromIdno:function(){var t=this;return J(U.a.mark((function a(){var e,o,n;return U.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=t,o={headers:{Authorization:t.userData.user_id+" "+t.token}},n={user_id:t.userData.user_id,id_no:t.userData.id_number},a.next=5,c.a.post("".concat(e.$apiUrl,"getfosanumberfromidno"),n,o).then((function(t){localStorage.setItem("UserMianFosa",JSON.stringify(t.data.acc_details)),t=t.data.acc_details,e.form.accountName=t.accname,e.form.bankName=t.holder_name,e.form.accountNumber=t.accno,e.form.sortCode=t.paybill_code+e.userData.member_number})).catch((function(t){console.log(t)}));case 5:case"end":return a.stop()}}),a)})))()}},created:function(){this.userData=JSON.parse(localStorage.getItem("LoggedUser")),this.GetCustomerPackage()}},G=F,P=Object(m["a"])(G,I,j,!1,null,null,null),B=P.exports,E={name:"DashboardTabs",components:{BillingAddressTab:T,BankDetailsTab:B},data:function(){return{tabsState:1,tabs:["BillingAddressTab","BankDetailsTab"]}},methods:{submit:function(t){this.$emit("submit",t)}}},M=E,W=Object(m["a"])(M,$,C,!1,null,null,null),q=W.exports,H=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("va-list",{staticClass:"mb-2",attrs:{fit:""}},[e("va-list-label",[t._v(" Invoices ")]),t._l(t.kins,(function(a,o){return o<=8?[e("va-item",[e("va-item-section",{attrs:{avatar:""}},[e("avatar",{attrs:{username:t._f("formatLongDate1")(a.inv_date),color:t.spinnersColor}})],1),e("va-item-section",[e("va-item-label",[t._v(" Invoice# "+t._s(a.inv_number)+" ")]),e("va-item-label",{attrs:{caption:""}},[t._v(" "+t._s(t._f("formatDate")(a.inv_date))+" ")]),e("va-item-label",[t._v(" "+t._s(t._f("Currency")(a.inv_amount))+" ")])],1),a.isbeneficiary?e("va-item-section",{attrs:{side:""}},[e("va-icon",{attrs:{name:"fa fa-check"}})],1):t._e()],1)]:t._e()}))],2)},K=[],Q={components:{Avatar:u.a},data:function(){return{trans:{},loading:!1,spinnersColor:this.$themes.primary,count:0,kins:{},term:null,mode:0,userData:JSON.parse(localStorage.getItem("LoggedUser")),token:JSON.parse(localStorage.getItem("Token"))}},created:function(){this.getInvoices()},methods:{getInvoices:function(){var t=this,a={headers:{Authorization:this.userData.user_id+" "+this.token}};c.a.post("".concat(t.$apiUrl,"getinvoices"),this.userData.user_id,a).then((function(a){a=a.data,t.kins=a})).catch((function(t){console.log(t)}))}}},R=Q,V=Object(m["a"])(R,H,K,!1,null,null,null),X=V.exports,Y={name:"dashboard",components:{DashboardInfoBlock:b,DashboardTable:D,DashboardTabs:q,DashboardKins:X},data:function(){return{userData:{}}},created:function(){this.userData=JSON.parse(localStorage.getItem("LoggedUser"))},methods:{}},Z=Y,tt=(e("c5cb"),Object(m["a"])(Z,o,n,!1,null,null,null));a["default"]=tt.exports},b047:function(t,a,e){var o=e("1a8c"),n=e("408c"),s=e("b4b0"),i="Expected a function",r=Math.max,c=Math.min;function l(t,a,e){var l,u,d,f,m,h,b=0,_=!1,p=!1,v=!0;if("function"!=typeof t)throw new TypeError(i);function g(a){var e=l,o=u;return l=u=void 0,b=a,f=t.apply(o,e),f}function x(t){return b=t,m=setTimeout(D,a),_?g(t):f}function k(t){var e=t-h,o=t-b,n=a-e;return p?c(n,d-o):n}function y(t){var e=t-h,o=t-b;return void 0===h||e>=a||e<0||p&&o>=d}function D(){var t=n();if(y(t))return $(t);m=setTimeout(D,k(t))}function $(t){return m=void 0,v&&l?g(t):(l=u=void 0,f)}function C(){void 0!==m&&clearTimeout(m),b=0,l=h=u=m=void 0}function S(){return void 0===m?f:$(n())}function w(){var t=n(),e=y(t);if(l=arguments,u=this,h=t,e){if(void 0===m)return x(h);if(p)return clearTimeout(m),m=setTimeout(D,a),g(h)}return void 0===m&&(m=setTimeout(D,a)),f}return a=s(a)||0,o(e)&&(_=!!e.leading,p="maxWait"in e,d=p?r(s(e.maxWait)||0,a):d,v="trailing"in e?!!e.trailing:v),w.cancel=C,w.flush=S,w}t.exports=l},b4b0:function(t,a,e){var o=e("1a8c"),n=e("ffd69"),s=NaN,i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;function d(t){if("number"==typeof t)return t;if(n(t))return s;if(o(t)){var a="function"==typeof t.valueOf?t.valueOf():t;t=o(a)?a+"":a}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var e=c.test(t);return e||l.test(t)?u(t.slice(2),e?2:8):r.test(t)?s:+t}t.exports=d},c5cb:function(t,a,e){"use strict";var o=e("fdad"),n=e.n(o);n.a},fdad:function(t,a,e){},ffd69:function(t,a,e){var o=e("3729"),n=e("1310"),s="[object Symbol]";function i(t){return"symbol"==typeof t||n(t)&&o(t)==s}t.exports=i}}]);
//# sourceMappingURL=chunk-389b7c27.4a8ceac1.js.map