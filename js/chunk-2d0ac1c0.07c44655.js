(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ac1c0"],{"17ae":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"buy-airtime"},[r("div",{staticStyle:{position:"fixed",top:"50%",left:"50%","z-index":"999"}},[t.loading?r("atom-spinner",{attrs:{"animation-duration":t.speed,size:t.config.size,color:t.spinnersColor}}):t._e()],1),t.processingError?r("div",{staticClass:"mb-3"},[r("va-notification",{attrs:{color:"danger",closeable:""}},[t._v(" An error occurred! Please Try again later. ")])],1):t._e(),r("div",{staticClass:"row"},[r("div",{staticClass:"flex xs12 md6"},[r("va-card",{attrs:{title:t.$t("menus.buy-airtime")}},[r("form",{on:{submit:function(e){return e.preventDefault(),t.onsubmit(e)}}},[r("va-input",{attrs:{label:t.$t("amount"),type:"number",error:!!t.amountErrors.length,"error-messages":t.amountErrors},model:{value:t.formdata.amount,callback:function(e){t.$set(t.formdata,"amount",e)},expression:"formdata.amount"}}),r("va-input",{attrs:{label:t.$t("recieving_phone_no"),error:!!t.phoneErrors.length,"error-messages":t.phoneErrors},model:{value:t.formdata.recieving_phone_no,callback:function(e){t.$set(t.formdata,"recieving_phone_no",e)},expression:"formdata.recieving_phone_no"}}),r("div",{staticClass:"row mt-5"},[r("va-button",{attrs:{type:"submit"}},[t._v(" "+t._s(t.$t("forms.controls.submit"))+" ")])],1)],1)])],1)]),r("va-modal",{attrs:{position:"top",size:"medium",title:t.$t("confirm_trans"),cancelClass:"none",okText:t.$t("modal.confirm"),cancelText:t.$t("modal.cancel"),noOutsideDismiss:"",noEscDismiss:""},on:{ok:t.FinalPost},model:{value:t.showConfirmModal,callback:function(e){t.showConfirmModal=e},expression:"showConfirmModal"}},[r("table",{staticClass:"va-table va-table--striped va-table--hoverable",attrs:{width:"100%"}},[r("tbody",[r("tr",[r("td",[t._v("Recieving Phone No.")]),r("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.phone_no))])]),r("tr",[r("td",[t._v("Airtime amount")]),r("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("Currency")(t.payment_amount)))])]),r("tr",[r("td",[t._v("Transaction Charge")]),r("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("Currency")(t.charge)))])])])])])],1)},n=[],a=r("bc3a"),i=r.n(a),s=r("4583");function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var m={components:u({},s),name:"buy-airtime",data:function(){return{userData:JSON.parse(localStorage.getItem("LoggedUser")),token:JSON.parse(localStorage.getItem("Token")),loading:!1,loadSelect:!1,processingError:!1,charge:0,finalPost:"",formdata:{recieving_phone_no:"",amount:"",user:""},amountErrors:[],phoneErrors:[],payment_amount:0,phone_no:"",showConfirmModal:!1,config:{size:80,duration:1500},spinnersColor:this.$themes.secondary,currentDuration:1500,sliderDuration:{min:1e3,max:2e3}}},computed:{speed:function(){return this.sliderDuration.min+this.sliderDuration.max-this.currentDuration},formReady:function(){return!this.amountErrors.length&&!this.phoneErrors.length}},methods:{onsubmit:function(){if(this.processingError=!1,this.amountErrors=this.formdata.amount?[]:["Amount is required"],this.phoneErrors=this.formdata.recieving_phone_no?[]:["Phone No. is required"],this.formReady){this.loading=!0;var t=this,e={headers:{Authorization:this.userData.user_id+" "+this.token}};i.a.post("".concat(this.$apiUrl,"BuyAirtime"),this.formdata,e).then((function(e){t.loading=!1;var r=e.data;0==r.status&&(t.amountErrors=r.message_code,t.phoneErrors=r.message_code),1==r.status&&(t.payment_amount=t.formdata.amount,t.phone_no=t.formdata.recieving_phone_no,t.showConfirmModal=!0)})).catch((function(t){console.log(t)}))}},FinalPost:function(){this.loading=!0;var t=this,e={headers:{Authorization:this.userData.user_id+" "+this.token}};i.a.post("".concat(this.$apiUrl,"BuyAirtimefinal"),this.formdata,e).then((function(e){t.loading=!1;var r=e.data;1==r.success?(t.showToast("Payment Processed succefully",{position:"bottom-right",icon:"fa-check",duration:2500}),setTimeout((function(){return t.$router.go(-1)}),2500)):t.processingError=!0})).catch((function(t){console.log(t)}))}},created:function(){this.formdata.user=this.userData.user_id}},d=m,h=r("2877"),f=Object(h["a"])(d,o,n,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0ac1c0.07c44655.js.map