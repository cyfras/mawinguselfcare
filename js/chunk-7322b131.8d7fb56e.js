(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7322b131"],{"00fd":function(t,e,a){var n=a("9e69"),o=Object.prototype,r=o.hasOwnProperty,i=o.toString,s=n?n.toStringTag:void 0;function l(t){var e=r.call(t,s),a=t[s];try{t[s]=void 0;var n=!0}catch(l){}var o=i.call(t);return n&&(e?t[s]=a:delete t[s]),o}t.exports=l},1310:function(t,e){function a(t){return null!=t&&"object"==typeof t}t.exports=a},"1a8c":function(t,e){function a(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=a},2293:function(t,e,a){},"29f3":function(t,e){var a=Object.prototype,n=a.toString;function o(t){return n.call(t)}t.exports=o},"2b3e":function(t,e,a){var n=a("585a"),o="object"==typeof self&&self&&self.Object===Object&&self,r=n||o||Function("return this")();t.exports=r},3729:function(t,e,a){var n=a("9e69"),o=a("00fd"),r=a("29f3"),i="[object Null]",s="[object Undefined]",l=n?n.toStringTag:void 0;function c(t){return null==t?void 0===t?s:i:l&&l in Object(t)?o(t):r(t)}t.exports=c},"408c":function(t,e,a){var n=a("2b3e"),o=function(){return n.Date.now()};t.exports=o},"585a":function(t,e,a){(function(e){var a="object"==typeof e&&e&&e.Object===Object&&e;t.exports=a}).call(this,a("c8ba"))},"9e69":function(t,e,a){var n=a("2b3e"),o=n.Symbol;t.exports=o},"9ef4":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lists"},[a("div",{staticClass:"row"},[a("div",{staticClass:"flex xs12 md12 xl6"},[a("va-list",{staticClass:"mb-2",attrs:{fit:""}},[a("va-list-label",[t._v(" "+t._s(t.$t("loans.active"))+" ")]),a("div",{staticStyle:{position:"fixed",top:"50%",left:"50%","z-index":"999"}},[t.loading?a("atom-spinner",{attrs:{"animation-duration":t.speed,size:t.config.size,color:t.spinnersColor}}):t._e()],1),t._l(t.loans,(function(e,n){return[a("va-item",{key:"item"+e.loan_no,attrs:{clickable:""},on:{click:[function(a){return t.showDetails(e.loan_no)},function(a){return t.toggle(e.loan_no)}]}},[a("va-item-section",{attrs:{avatar:""}},[a("avatar",{attrs:{username:e.loan_product_name,color:t.spinnersColor}})],1),a("va-item-section",[a("va-item-label",[t._v(" "+t._s(e.loan_product_name)+" ")]),a("va-item-label",{attrs:{caption:""}},[t._v(" Approved Amount: KES "+t._s(t._f("Currency")(e.approved_amount))+" ")]),a("va-item-label",[t._v(" Your Loan Balance is : KES "+t._s(t._f("Currency")(e.balance))+" ")])],1),a("va-item-section",{attrs:{side:""}},[a("va-icon",{class:{active:e.loan_no==t.activeIndex},attrs:{name:"fa fa-eye"}})],1)],1),n<t.loans.length-1?a("va-list-separator",{key:"separator"+e.loan_no}):t._e()]}))],2)],1),t.showInfo?a("div",{staticClass:"flex xs12 md12 xl6"},[a("va-card",{attrs:{stripe:"info",title:t.$t("loans.loan-info")}},[a("template",{slot:"actions"},[a("va-popover",{attrs:{icon:t.popover.icon.icon,color:t.popover.color,title:t.popover.title,message:t.getMessage(),placement:"left",closed:""}},[a("va-button",{attrs:{icon:"fa fa-money"},on:{click:function(e){return t.goToLoan()}}},[t._v(" Pay Now")])],1)],1),a("table",{staticClass:"va-table va-table--striped va-table--hoverable",attrs:{width:"100%"}},[a("tbody",[a("tr",[a("td",[t._v("Loan No")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.loan_dets.loan_no))])]),a("tr",[a("td",[t._v("Loan Product Name")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.loan_dets.loan_product_name))])]),a("tr",[a("td",[t._v("Disbursement Date")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("formatLongDate")(t.loan_dets.issued_date)))])]),a("tr",[a("td",[t._v("Pay Bill Code")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.loan_dets.paybill_code))])]),a("tr",[a("td",[t._v("Mothly Repayment Amount")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("Currency")(t.loan_dets.monthly_repayment)))])]),a("tr",[a("td",[t._v("Approved Amout")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("Currency")(t.loan_dets.approved_amount)))])]),a("tr",[a("td",[t._v("Paid Amout")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("Currency")(t.calculatePaid)))])]),a("tr",[a("td",[t._v("Loan Balance")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("Currency")(t.loan_dets.balance)))])])])]),a("div",{staticClass:"row mt-3"},[a("va-button",{attrs:{color:"primary",icon:"fa fa-list"},on:{click:t.showReport}},[t._v(" "+t._s(t.$t("loans.view-statement"))+" ")])],1)],2)],1):t._e(),a("div",{staticClass:"flex xs12 md12 xl6"},[a("guaranteed-table")],1),t.showInfo?a("div",{staticClass:"flex xs12 md12 xl6"},[[a("va-card",{attrs:{title:t.$t("loans.guarantors")}},[a("div",{staticClass:"row align--center mb-1"},[a("div",{staticClass:"flex xs12 sm6"},[a("va-input",{staticClass:"ma-0",attrs:{value:t.term,placeholder:t.$t("tables.searchByName"),removable:""},on:{input:t.search}},[a("va-icon",{attrs:{slot:"prepend",name:"fa fa-search"},slot:"prepend"})],1)],1)]),a("va-data-table",{attrs:{fields:t.mode?t.detailedFields:t.fields,data:t.filteredData,loading:t.loading,hoverable:""},scopedSlots:t._u([{key:"amount_guaranteed",fn:function(e){return[a("div",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("Currency")(e.rowData.amount_guaranteed)))])]}}],null,!1,3626111882)})],1)]],2):t._e()])])},o=[],r=a("a34a"),i=a.n(r),s=a("bc3a"),l=a.n(s),c=a("4583"),u=a("4a89"),d=a.n(u),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("va-card",{attrs:{title:t.$t("loans.guaranteed_loans")}},[a("div",{staticClass:"row align--center mb-1"},[a("div",{staticClass:"flex xs12 sm6"},[a("va-input",{staticClass:"ma-0",attrs:{value:t.term,placeholder:t.$t("tables.searchByName"),removable:""},on:{input:t.search}},[a("va-icon",{attrs:{slot:"prepend",name:"fa fa-search"},slot:"prepend"})],1)],1)]),a("va-data-table",{attrs:{fields:t.mode?t.detailedFields:t.fields,data:t.filteredData,loading:t.loading,hoverable:"","no-pagination":""},scopedSlots:t._u([{key:"posting_date",fn:function(e){return[t._v(" "+t._s(t._f("formatDate")(e.rowData.posting_date))+" ")]}},{key:"amount",fn:function(e){return[a("div",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("Currency")(e.rowData.amount)))])]}}])},[a("template",{slot:"icon"},[a("va-icon",{attrs:{name:"fa fa-list",color:"secondary"}})],1)],2)],1)},v=[],p=a("b047"),m=a.n(p),h={data:function(){return{trans:{},loading:!1,term:null,mode:0,userData:JSON.parse(localStorage.getItem("LoggedUser")),token:JSON.parse(localStorage.getItem("Token"))}},created:function(){this.getMiniStatement()},computed:{fields:function(){return[{name:"__slot:icon",width:"30px",dataClass:"text-center"},{name:"__slot:posting_date",title:this.$t("tables.headings.date"),width:"30%",sortField:"amount"},{name:"description",title:this.$t("tables.headings.description"),width:"50%"},{name:"__slot:amount",title:this.$t("tables.headings.amount"),width:"20%",sortField:"amount"}]},filteredData:function(){var t=this;return!this.term||this.term.length<1?this.trans:this.trans.filter((function(e){return e.name.toLowerCase().startsWith(t.term.toLowerCase())}))}},methods:{getMiniStatement:function(){var t=this,e={headers:{Authorization:this.userData.user_id+" "+this.token}};l.a.post("".concat(t.$apiUrl,"GetGuaranteedLoans"),this.userData.user_id,e).then((function(e){e=e.data,t.trans=e.slice()})).catch((function(t){console.log(t)}))},search:m()((function(t){this.term=t}),400)}},_=h,g=a("2877"),b=Object(g["a"])(_,f,v,!1,null,null,null),y=b.exports;function x(t,e,a,n,o,r,i){try{var s=t[r](i),l=s.value}catch(c){return void a(c)}s.done?e(l):Promise.resolve(l).then(n,o)}function w(t){return function(){var e=this,a=arguments;return new Promise((function(n,o){var r=t.apply(e,a);function i(t){x(r,n,o,i,s,"next",t)}function s(t){x(r,n,o,i,s,"throw",t)}i(void 0)}))}}function O(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function D(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?O(Object(a),!0).forEach((function(e){S(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function S(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var C={components:D(D({},c),{},{Avatar:d.a,GuaranteedTable:y}),data:function(){return{term:null,trans:{},mode:0,tableData:{},loading:!0,showInfo:!1,show:!0,config:{size:80,duration:1500},spinnersColor:this.$themes.secondary,currentDuration:1500,sliderDuration:{min:1e3,max:2e3},loans:{},loan_dets:{},userData:JSON.parse(localStorage.getItem("LoggedUser")),token:JSON.parse(localStorage.getItem("Token")),activeIndex:null,popover:{title:"Pay Loan!",icon:{icon:"fa fa-upload",text:"pay now"},color:"warning"}}},computed:{speed:function(){return this.sliderDuration.min+this.sliderDuration.max-this.currentDuration},calculatePaid:function(){return this.loan_dets.approved_amount-this.loan_dets.balance},fields:function(){return[{name:"guarantor_name",title:this.$t("loans.guarantor_name"),width:"30%",sortField:"guarantor_name"},{name:"member_no",title:this.$t("loans.member_no"),width:"30%",sortField:"member_no"},{name:"staff_no",title:this.$t("loans.staff_no"),width:"20%",sortField:"staff_no"},{name:"__slot:amount_guaranteed",title:this.$t("loans.amount_guaranteed"),width:"20%",sortField:"amount_guaranteed"}]},filteredData:function(){var t=this;return!this.term||this.term.length<1?this.trans:this.trans.filter((function(e){return e.name.toLowerCase().startsWith(t.term.toLowerCase())}))}},methods:{toggle:function(t){this.activeIndex=t},goToLoan:function(){this.$router.push({name:"loan",params:{loan_no:this.loan_dets.loan_no}})},getMessage:function(){return 1==this.userData.is_registered_mobile_user?"Pay with M-pesa or tranfer from savings":"Pay Loan Using M-pesa"},showDetails:function(t){var e=this;return w(i.a.mark((function a(){var n,o,r;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,e.showInfo=!1,n={user:e.userData.user_id,loan:t},o={headers:{Authorization:e.userData.user_id+" "+e.token}},r=e,a.next=7,l.a.post("".concat(r.$apiUrl,"GetFullLoanDeatils"),n,o).then((function(t){t=t.data,r.loan_dets=t.acc_details})).catch((function(t){console.log(t)}));case 7:return a.next=9,l.a.post("".concat(r.$apiUrl,"GetLoanGuarantors"),n,o).then((function(t){r.loading=!1,t=t.data,r.trans=t.slice(),r.showInfo=!0})).catch((function(t){console.log(t)}));case 9:case"end":return a.stop()}}),a)})))()},GetMemberLoans:function(){var t=this,e={headers:{Authorization:this.userData.user_id+" "+this.token}};l.a.post("".concat(t.$apiUrl,"GetMemberLoans"),t.userData.user_id,e).then((function(e){t.loading=!1,e=e.data,t.loans=e})).catch((function(t){console.log(t)}))},search:m()((function(t){this.term=t}),400),showReport:function(){this.$router.push({name:"LOANSTMNT",params:{loan_no:this.loan_dets.loan_no}})}},created:function(){this.GetMemberLoans()}},j=C,$=(a("df7e"),Object(g["a"])(j,n,o,!1,null,null,null));e["default"]=$.exports},b047:function(t,e,a){var n=a("1a8c"),o=a("408c"),r=a("b4b0"),i="Expected a function",s=Math.max,l=Math.min;function c(t,e,a){var c,u,d,f,v,p,m=0,h=!1,_=!1,g=!0;if("function"!=typeof t)throw new TypeError(i);function b(e){var a=c,n=u;return c=u=void 0,m=e,f=t.apply(n,a),f}function y(t){return m=t,v=setTimeout(O,e),h?b(t):f}function x(t){var a=t-p,n=t-m,o=e-a;return _?l(o,d-n):o}function w(t){var a=t-p,n=t-m;return void 0===p||a>=e||a<0||_&&n>=d}function O(){var t=o();if(w(t))return D(t);v=setTimeout(O,x(t))}function D(t){return v=void 0,g&&c?b(t):(c=u=void 0,f)}function S(){void 0!==v&&clearTimeout(v),m=0,c=p=u=v=void 0}function C(){return void 0===v?f:D(o())}function j(){var t=o(),a=w(t);if(c=arguments,u=this,p=t,a){if(void 0===v)return y(p);if(_)return clearTimeout(v),v=setTimeout(O,e),b(p)}return void 0===v&&(v=setTimeout(O,e)),f}return e=r(e)||0,n(a)&&(h=!!a.leading,_="maxWait"in a,d=_?s(r(a.maxWait)||0,e):d,g="trailing"in a?!!a.trailing:g),j.cancel=S,j.flush=C,j}t.exports=c},b4b0:function(t,e,a){var n=a("1a8c"),o=a("ffd69"),r=NaN,i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;function d(t){if("number"==typeof t)return t;if(o(t))return r;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var a=l.test(t);return a||c.test(t)?u(t.slice(2),a?2:8):s.test(t)?r:+t}t.exports=d},df7e:function(t,e,a){"use strict";var n=a("2293"),o=a.n(n);o.a},ffd69:function(t,e,a){var n=a("3729"),o=a("1310"),r="[object Symbol]";function i(t){return"symbol"==typeof t||o(t)&&n(t)==r}t.exports=i}}]);
//# sourceMappingURL=chunk-7322b131.8d7fb56e.js.map