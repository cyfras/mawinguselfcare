(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c8244"],{"542a":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"create-ticket"},[r("div",{staticStyle:{position:"fixed",top:"50%",left:"50%","z-index":"999"}},[e.loading?r("atom-spinner",{attrs:{"animation-duration":e.speed,size:e.config.size,color:e.spinnersColor}}):e._e()],1),e.processingError?r("div",{staticClass:"mb-3"},[r("va-notification",{attrs:{color:"danger",closeable:""}},[e._v(" "+e._s(e.respErr)+" ")])],1):e._e(),r("div",{staticClass:"row"},[r("div",{staticClass:"flex xs12 md12 lg12"},[r("va-card",{attrs:{title:e.$t("activities.ticket_form")}},[r("form",{on:{submit:function(t){return t.preventDefault(),e.onsubmit(t)}}},[r("va-select",{staticClass:"mb-4",attrs:{label:"Category",textBy:"code",options:e.categories,error:!!e.catError.length,"error-messages":e.catError,"key-by":"id"},model:{value:e.formdata.category,callback:function(t){e.$set(e.formdata,"category",t)},expression:"formdata.category"}}),r("va-input",{attrs:{label:e.$t("message"),type:"textarea",error:!!e.messageErrors.length,"error-messages":e.messageErrors},model:{value:e.formdata.message,callback:function(t){e.$set(e.formdata,"message",t)},expression:"formdata.message"}}),r("div",{staticClass:"row mt-5"},[r("va-button",{attrs:{type:"submit"}},[e._v(" "+e._s(e.$t("forms.controls.submit"))+" ")])],1)],1)])],1)])])},a=[],o=r("bc3a"),i=r.n(o),n=r("4583");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m={components:u({},n),name:"create-ticket",data:function(){return{userData:JSON.parse(localStorage.getItem("LoggedUser")),token:JSON.parse(localStorage.getItem("Token")),loading:!1,processingError:!1,respErr:"",loadSelect:!1,showConfirmModal:!1,config:{size:80,duration:1500},spinnersColor:"#4ab0e1",currentDuration:1500,sliderDuration:{min:1e3,max:2e3},formdata:{user:"",category:"",message:""},categories:[],acc_code:{},selected:{},postdata:{},catError:[],messageErrors:[]}},computed:{speed:function(){return this.sliderDuration.min+this.sliderDuration.max-this.currentDuration},formReady:function(){return!this.messageErrors.length&&!this.catError.length}},methods:{GetTicketCategories:function(){var e=this,t={headers:{Authorization:this.userData.user_id+" "+this.token}};i.a.post("".concat(e.$apiUrl,"getTicketCategories"),this.userData.user_id,t).then((function(t){t=t.data,e.categories=t.categories,console.log(t)})).catch((function(e){console.log(e)}))},onsubmit:function(){if(this.processingError=!1,this.catError=this.formdata.category.id?[]:["Please Select a category"],this.messageErrors=this.formdata.message?[]:["Amount is required"],this.formReady){this.loading=!0;var e=this,t={headers:{Authorization:this.userData.user_id+" "+this.token}},r={user:this.formdata.user,category:this.formdata.category.id,message:this.formdata.message};i.a.post("".concat(this.$apiUrl,"CreateTicket"),r,t).then((function(t){e.loading=!1;var r=t.data;"1"==r.response.success?(e.showToast("Ticket was succefully Raised",{position:"bottom-right",icon:"fa-check",duration:2400}),setTimeout((function(){return e.$router.push({name:"tickets-list",params:{}})}),2500)):(e.processingError=!0,e.respErr=r.response.message,e.showToast(r.response.message,{position:"bottom-right",icon:"fa-check",duration:2500}))})).catch((function(e){console.log(e)}))}}},created:function(){this.formdata.phone_no=this.userData.mobile_number,this.customer=this.userData.member_number,this.formdata.user=this.userData.user_id,this.GetTicketCategories()}},d=m,g=r("2877"),f=Object(g["a"])(d,s,a,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0c8244.711ad9e4.js.map