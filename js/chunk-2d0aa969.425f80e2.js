(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aa969"],{"123e":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"view-pdf"},[a("div",{staticStyle:{position:"fixed",top:"18%",left:"50%","z-index":"999"}},[t.loading?a("looping-rhombuses-spinner",{attrs:{"animation-duration":t.speed,"rhombus-size":t.config.size,color:t.spinnersColor}}):t._e()],1),a("div",{staticClass:"flex xs12"},[a("va-card",[a("template",{slot:"actions"},[t.showCalandar?a("va-button",{attrs:{type:"submit",id:"my-form"},on:{click:function(e){return t.fetchPdf(e)}}},[t._v(" "+t._s(t.$t("forms.controls.submit"))+" ")]):t._e()],1),a("form",{attrs:{id:"my-form"}},[t.showCalandar?a("div",{staticClass:"row flex xs12"},[a("div",{staticClass:"flex xs12 sm6"},[a("va-date-picker",{attrs:{label:t.$t("forms.dateTimePicker.from"),config:{locale:{firstDayOfWeek:1},inline:!1,position:"below",altInput:!0,minDate:t.SixMonthsAgo,maxDate:t.today}},model:{value:t.datepicker.from,callback:function(e){t.$set(t.datepicker,"from",e)},expression:"datepicker.from"}})],1),a("div",{staticClass:"flex xs12 sm6"},[a("va-date-picker",{attrs:{label:t.$t("forms.dateTimePicker.to"),config:{locale:{firstDayOfWeek:1},inline:!1,position:"below",altInput:!0,minDate:t.SixMonthsAgo,maxDate:t.today}},model:{value:t.datepicker.to,callback:function(e){t.$set(t.datepicker,"to",e)},expression:"datepicker.to"}})],1),a("div",{staticClass:"flex xs12 sm6"},[t.isfosa?a("va-select",{staticClass:"mb-4",attrs:{label:"Account",textBy:"accname",options:t.accounts,"key-by":"paybill_code"},model:{value:t.datepicker.acc_code,callback:function(e){t.$set(t.datepicker,"acc_code",e)},expression:"datepicker.acc_code"}}):t._e()],1)]):t._e()]),a("div",{staticClass:"row flex xs12"},[t.doc?a("object",{staticStyle:{width:"100%",height:"720px","z-index":"998"},attrs:{data:t.documentPath,type:"application/pdf"}},[a("p",[t._v("It appears you don't have a PDF plugin for this browser. "),a("a",{attrs:{href:t.documentPath,download:"document.pdf"}},[t._v("Click here to download the file.")])])]):t._e()])],2)],1)])},i=[],n=a("a34a"),r=a.n(n),s=a("bc3a"),c=a.n(s),l=a("4583");function d(t,e,a,o,i,n,r){try{var s=t[n](r),c=s.value}catch(l){return void a(l)}s.done?e(c):Promise.resolve(c).then(o,i)}function u(t){return function(){var e=this,a=arguments;return new Promise((function(o,i){var n=t.apply(e,a);function r(t){d(n,o,i,r,s,"next",t)}function s(t){d(n,o,i,r,s,"throw",t)}r(void 0)}))}}function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){h(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function h(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var m={components:f({},l),name:"view-pdf",data:function(){return{showCalandar:!1,loading:!1,isfosa:!1,doc:!1,acc_cd:"",inv_num:this.$route.params.inv_num,acc_details:{},accounts:JSON.parse(localStorage.getItem("UserFosas")),userData:JSON.parse(localStorage.getItem("LoggedUser")),token:JSON.parse(localStorage.getItem("Token")),documentPath:"",config:{size:38,duration:1500},spinnersColor:this.$themes.primary,currentDuration:1500,sliderDuration:{min:1e3,max:2e3}}},computed:{speed:function(){return this.sliderDuration.min+this.sliderDuration.max-this.currentDuration}},methods:{getSelected:function(t){return console.log(t),this.accounts.find((function(e){return e.paybill_code.toLowerCase()==t.toLowerCase()}))},createProformainvoices:function(){var t=this,e={headers:{Authorization:this.userData.user_id+" "+this.token}};c.a.post("".concat(t.$apiUrl,"createproformainvoice"),this.userData.user_id,e).then((function(e){e=e.data,t.trans=e.slice()})).catch((function(t){console.log(t)}))},fetchPdf:function(){var t=this;return u(r.a.mark((function e(){var a,o,i;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loading=!0,a=t,o={headers:{Authorization:t.userData.user_id+" "+t.token}},!t.isfosa){e.next=8;break}return e.next=6,t.getSelected(t.datepicker.acc_code.paybill_code);case 6:t.acc_details=e.sent,t.acc_cd=t.acc_details.accname;case 8:i={user:t.userData.user_id,inv_num:t.inv_num},c.a.post("".concat(t.$apiUrl,"proforma"),i,o).then((function(t){var e=t.data.pdf;a.documentPath="data:application/pdf;base64,".concat(e),a.doc=!0,a.loading=!1,a.showCalandar=!1})).catch((function(t){console.log(t)}));case 10:case"end":return e.stop()}}),e)})))()},SetFilter:function(){this.showCalandar=!0,"FOSASTMNT"==this.reportCode&&(this.isfosa=!0)}},created:function(){this.today=this.$options.filters.dateToYMD(new Date),this.datepicker.to=this.today,this.SixMonthsAgo=this.$options.filters.createDate(0,-6,0),this.SixMonthsAgo=this.$options.filters.dateToYMD(this.SixMonthsAgo),this.datepicker.from=this.SixMonthsAgo;var t={};t=this.$route.fullPath,this.$route.params.loan_no?(this.loan_no=this.$route.params.loan_no,this.reportCode=t.split("/").slice(-2).reverse().pop()):this.reportCode=t.substring(t.lastIndexOf("/")+1),"FOSASTMNT"==this.reportCode?(this.isfosa=!0,this.showCalandar=!0):(this.loading=!0,this.fetchPdf())}},v=m,b=a("2877"),g=Object(b["a"])(v,o,i,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2d0aa969.425f80e2.js.map