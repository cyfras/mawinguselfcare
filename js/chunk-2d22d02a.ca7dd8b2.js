(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22d02a"],{f659:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"funds-deposit"},[o("div",{staticStyle:{position:"fixed",top:"50%",left:"50%","z-index":"999"}},[t.loading?o("atom-spinner",{attrs:{"animation-duration":t.speed,size:t.config.size,color:t.spinnersColor}}):t._e()],1),t.processingError?o("div",{staticClass:"mb-3"},[o("va-notification",{attrs:{color:"danger",closeable:""}},[t._v(" An error occurred! Please Try again later. ")])],1):t._e(),o("div",{staticClass:"row"},[o("div",{staticClass:"flex xs12 md6 lg6"},[o("va-card",{attrs:{title:t.$t("activities.password_form")}},[o("form",{on:{submit:function(e){return e.preventDefault(),t.onsubmit(e)}}},[o("va-input",{attrs:{label:"Old Password",type:"text"},model:{value:t.formdata.password,callback:function(e){t.$set(t.formdata,"password",e)},expression:"formdata.password"}}),o("va-input",{staticClass:"mb-4",attrs:{label:"New Password",type:"password"},model:{value:t.formdata.type,callback:function(e){t.$set(t.formdata,"type",e)},expression:"formdata.type"}}),o("va-input",{attrs:{label:"Confirm Password",type:"password"},model:{value:t.formdata.confirm,callback:function(e){t.$set(t.formdata,"confirm",e)},expression:"formdata.confirm"}}),o("div",{staticClass:"row mt-5"},[o("va-button",{attrs:{type:"submit"}},[t._v(" "+t._s(t.$t("forms.controls.submit"))+" ")])],1)],1)])],1)]),o("va-modal",{attrs:{position:"top",size:"medium",title:t.$t("confirm_trans"),cancelClass:"none",okText:t.$t("modal.confirm"),cancelText:t.$t("modal.cancel"),noOutsideDismiss:"",noEscDismiss:""},on:{ok:t.FinalPost},model:{value:t.showConfirmModal,callback:function(e){t.showConfirmModal=e},expression:"showConfirmModal"}},[o("table",{staticClass:"va-table va-table--striped va-table--hoverable",attrs:{width:"100%"}},[o("tbody",[o("tr",[o("td",[t._v("Account")]),o("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.acc_details.accname))])]),o("tr",[o("td",[t._v("Payment Phone No")]),o("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.paying_phone_no))])]),o("tr",[o("td",[t._v("Account Balance")]),o("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(t._f("Currency")(t.acc_details.balance))+" ")])]),o("tr",[o("td",[t._v("Deposit Amount")]),o("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(t._f("Currency")(t.deposit_amount))+" ")])]),o("tr",[o("td",[t._v("New Account Balance")]),o("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(t._f("Currency")(t.acc_details.balance- -t.deposit_amount))+" ")])])])])])],1)},s=[],r=o("bc3a"),n=o.n(r),i=o("4583");function c(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}function l(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?c(Object(o),!0).forEach((function(e){d(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function d(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var u={components:l({},i),name:"funds-deposit",data:function(){return{userData:JSON.parse(localStorage.getItem("LoggedUser")),accdetails:JSON.parse(localStorage.getItem("UserMianFosa")),token:JSON.parse(localStorage.getItem("Token")),loading:!1,processingError:!1,loadSelect:!1,showConfirmModal:!1,acc_details:{accname:"",balance:""},deposit_amount:"",paying_phone_no:"",accounts:JSON.parse(localStorage.getItem("UserFosas")),fosas:JSON.parse(localStorage.getItem("UserFosas")),config:{size:80,duration:1500},spinnersColor:this.$themes.secondary,currentDuration:1500,sliderDuration:{min:1e3,max:2e3},formdata:{amount:"",user:"",acc_code:"",type:"",phone_no:""},amountErrors:[],phoneErrors:[],AccountTypes:[{id:"",description:"select an Option"},{id:"mpesa",description:"M-pesa"},{id:"card",description:"Card Payment"}],showBosa:!1,showFosa:!1,acc_code:{},selected:{},postdata:{}}},computed:{speed:function(){return this.sliderDuration.min+this.sliderDuration.max-this.currentDuration},formReady:function(){return!this.amountErrors.length&&!this.phoneErrors.length}},methods:{getSelected:function(t){return console.log(t),this.accounts.find((function(e){return e.paybill_code.toLowerCase()==t.toLowerCase()}))},onsubmit:function(){this.processingError=!1,this.amountErrors=this.formdata.amount?[]:["Amount is required"],this.phoneErrors=this.formdata.phone_no?[]:["Phone No is required"],this.formReady&&(this.paying_phone_no=this.formdata.phone_no,this.acc_details=this.getSelected(this.formdata.acc_code.paybill_code),this.deposit_amount=this.formdata.amount,this.showConfirmModal=!0)},FinalPost:function(){var t=this.formdata.acc_code;this.formdata.acc_code=this.formdata.acc_code.paybill_code;var e="Enter M-pesa pin on payong phone to complete";this.loading=!0;var o=this,a={headers:{Authorization:this.userData.user_id+" "+this.token}};n.a.post("".concat(this.$apiUrl,"depositMoneyFinal"),this.formdata,a).then((function(a){o.loading=!1,o.formdata.acc_code=t;var s=a.data;"1"==s.response.success?o.showToast("Payment Processed succefully ".concat(e),{position:"bottom-right",icon:"fa-check",duration:2500}):o.processingError=!0})).catch((function(t){console.log(t)}))},loadBosaAccs:function(){this.loadSelect=!0;var t=this,e={headers:{Authorization:this.userData.user_id+" "+this.token}};n.a.post("".concat(t.$apiUrl,"GetBackOfficeAccounts"),t.userData.user_id,e).then((function(e){t.accounts=e.data,t.loadSelect=!1})).catch((function(t){console.log(t)}))},setSelected:function(t){this.formdata.acc_code={};var e=t.id;e&&("fosa"==e?(this.accounts=this.fosas,this.loadSelect=!1,this.showFosa=!0,this.showBosa=!1):(this.showBosa=!0,this.showFosa=!1,this.loadBosaAccs()))}},created:function(){this.formdata.phone_no=this.userData.mobile_number,this.formdata.user=this.userData.user_id}},p=u,m=o("2877"),h=Object(m["a"])(p,a,s,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d22d02a.ca7dd8b2.js.map