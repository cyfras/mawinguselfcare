(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0db853"],{"6fe2":function(t,o,e){"use strict";e.r(o);var r=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"mobile-loan"},[e("div",{staticStyle:{position:"fixed",top:"50%",left:"50%","z-index":"999"}},[t.loading?e("atom-spinner",{attrs:{"animation-duration":t.speed,size:t.config.size,color:t.spinnersColor}}):t._e()],1),t.processingError?e("div",{staticClass:"mb-3"},[e("va-notification",{attrs:{color:"danger",closeable:""}},[t._v(" An error occurred! Please Try again later. ")])],1):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"flex xs12 md6 lg6"},[e("va-card",{attrs:{title:"Loan Limit: "+t.limitc}},[e("form",{on:{submit:function(o){return o.preventDefault(),t.onsubmit(o)}}},[e("va-input",{attrs:{label:t.$t("amount"),type:"number",max:t.limit,min:5e3,error:!!t.amountErrors.length,"error-messages":t.amountErrors},model:{value:t.formdata.amount,callback:function(o){t.$set(t.formdata,"amount",o)},expression:"formdata.amount"}}),e("div",{staticClass:"row mt-5"},[e("va-button",{attrs:{type:"submit"}},[t._v(" "+t._s(t.$t("forms.controls.submit"))+" ")])],1)],1)])],1)]),e("va-modal",{attrs:{position:"top",size:"medium",title:t.$t("confirm_trans"),cancelClass:"none",okText:t.$t("modal.confirm"),cancelText:t.$t("modal.cancel"),noOutsideDismiss:"",noEscDismiss:""},on:{ok:t.FinalPost},model:{value:t.showConfirmModal,callback:function(o){t.showConfirmModal=o},expression:"showConfirmModal"}},[e("table",{staticClass:"va-table va-table--striped va-table--hoverable",attrs:{width:"100%"}},[e("tbody",[e("tr",[e("td",[t._v("Loan Amount")]),e("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.formdata.amount))])])])])])],1)},a=[],i=e("bc3a"),n=e.n(i),s=e("4583");function c(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?c(Object(e),!0).forEach((function(o){u(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}function u(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var m={components:l({},s),name:"mobile-loan",data:function(){return{userData:JSON.parse(localStorage.getItem("LoggedUser")),accdetails:JSON.parse(localStorage.getItem("UserMianFosa")),token:JSON.parse(localStorage.getItem("Token")),loading:!1,limit:0,limitc:0,processingError:!1,loadSelect:!1,showConfirmModal:!1,formdata:{amount:"",user:""},amountErrors:[],config:{size:80,duration:1500},spinnersColor:this.$themes.secondary,currentDuration:1500,sliderDuration:{min:1e3,max:2e3}}},computed:{speed:function(){return this.sliderDuration.min+this.sliderDuration.max-this.currentDuration},formReady:function(){return!this.amountErrors.length}},methods:{getLoanLimit:function(){this.loading=!0;var t=this,o={headers:{Authorization:this.userData.user_id+" "+this.token}};n.a.post("".concat(this.$apiUrl,"GetLoanLimit"),this.userData.user_id,o).then((function(o){t.loading=!1;var e=parseInt(o.data);t.limit=e,t.limitc=t.$options.filters.Currency(e),t.showToast("Your loan limit is ".concat(e),{position:"bottom-right",icon:"fa-check",duration:1e4})})).catch((function(t){console.log(t)}))},onsubmit:function(){this.processingError=!1,this.amountErrors=this.formdata.amount?[]:["Amount is required"],this.amountErrors=this.formdata.amount<=this.limit?[]:["Amount is more than your loan limit"],this.formReady&&(this.showConfirmModal=!0)},FinalPost:function(){this.loading=!0;var t=this,o={headers:{Authorization:this.userData.user_id+" "+this.token}};n.a.post("".concat(this.$apiUrl,"GetLoan"),this.formdata,o).then((function(o){t.loading=!1;var e=o.data;console.log(e),"1"==e.success?(t.showToast("Loan Processed succefully",{position:"bottom-right",icon:"fa-check",duration:2500}),localStorage.removeItem("UserFosas"),setTimeout((function(){return t.$router.push({name:"dashboard"})}),2500)):t.processingError=!0})).catch((function(t){console.log(t)}))}},created:function(){this.formdata.phone_no=this.userData.mobile_number,this.formdata.user=this.userData.user_id,this.getLoanLimit()}},d=m,f=e("2877"),h=Object(f["a"])(d,r,a,!1,null,null,null);o["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0db853.59b95b67.js.map