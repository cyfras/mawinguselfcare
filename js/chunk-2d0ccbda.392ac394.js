(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ccbda"],{"4ee8":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"funds-transfer"},[a("div",{staticStyle:{position:"fixed",top:"50%",left:"50%","z-index":"999"}},[t.loading?a("atom-spinner",{attrs:{"animation-duration":t.speed,size:t.config.size,color:t.spinnersColor}}):t._e()],1),t.processingError?a("div",{staticClass:"mb-3"},[a("va-notification",{attrs:{color:"danger",closeable:""}},[t._v(" An error occurred! Please Try again later. ")])],1):t._e(),t.canProcess?t._e():a("div",{staticClass:"mb-3"},[a("va-notification",{attrs:{color:"danger",closeable:""}},[t._v(" Dear member, kindly note that you must be a registered mobile banking user to use this service. Please visit Kenversity SACCO Society Limited offices to register for mobile banking services. Thank you ")])],1),t.accErrors?a("div",{staticClass:"mb-3"},[a("va-notification",{attrs:{color:"danger",closeable:""}},[t._v(" "+t._s(t.accErrors)+" ")])],1):t._e(),a("div",{staticClass:"row"},[t.canProcess?a("div",{staticClass:"flex xs12 md6 lg6"},[a("va-card",{attrs:{title:t.$t("activities.transfer_form")}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.onsubmit(e)}}},[a("va-input",{attrs:{label:t.$t("amount"),type:"number",error:!!t.amountErrors.length,"error-messages":t.amountErrors},model:{value:t.formdata.amount,callback:function(e){t.$set(t.formdata,"amount",e)},expression:"formdata.amount"}}),a("va-select",{staticClass:"mb-4",attrs:{label:"Transfer Type",textBy:"description",options:t.TransferTypes,"key-by":"id"},on:{input:t.setSelected},model:{value:t.formdata.type,callback:function(e){t.$set(t.formdata,"type",e)},expression:"formdata.type"}}),t.isInternal||t.isBosa?a("va-select",{staticClass:"mb-4",attrs:{label:"Account",textBy:"accname",options:t.accounts,error:t.accError,"key-by":"paybill_code"},model:{value:t.formdata.acc_code,callback:function(e){t.$set(t.formdata,"acc_code",e)},expression:"formdata.acc_code"}}):t._e(),t.isExternal?a("va-input",{attrs:{label:t.$t("auth.id_no"),error:!!t.idErrors.length,"error-messages":t.idErrors},model:{value:t.formdata.id_no,callback:function(e){t.$set(t.formdata,"id_no",e)},expression:"formdata.id_no"}}):t._e(),a("div",{staticClass:"row mt-5"},[a("va-button",{attrs:{type:"submit"}},[t._v(" "+t._s(t.$t("forms.controls.submit"))+" ")])],1)],1)])],1):t._e()]),a("va-modal",{attrs:{position:"top",size:"medium",title:t.$t("confirm_trans"),cancelClass:"none",okText:t.$t("modal.confirm"),cancelText:t.$t("modal.cancel"),noOutsideDismiss:"",noEscDismiss:""},on:{ok:t.FinalPost},model:{value:t.showConfirmModal,callback:function(e){t.showConfirmModal=e},expression:"showConfirmModal"}},[a("table",{staticClass:"va-table va-table--striped va-table--hoverable",attrs:{width:"100%"}},[a("tbody",[a("tr",[a("td",[t._v("Send To")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.recv_acc_no))])]),a("tr",[a("td",[t._v("Acc Name")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.recv_acc_name))])]),a("tr",[a("td",[t._v("Paying Acc Name")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.accdetails.accname))])]),a("tr",[a("td",[t._v("Paying Acc Balance")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("Currency")(t.accdetails.balance)))])]),a("tr",[a("td",[t._v("Tranfer Amount")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(" "+t._s(t._f("Currency")(t.formdata.amount))+" ")])]),a("tr",[a("td",[t._v("Transaction Charge")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("Currency")(t.cost)))])]),a("tr",[a("td",[t._v("Total Transaction Cost")]),a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t._f("Currency")(t.formdata.amount- -t.cost)))])])])])])],1)},s=[],o=a("bc3a"),i=a.n(o),n=a("4583");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){d(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var u={components:l({},n),name:"funds-transfer",data:function(){return{userData:JSON.parse(localStorage.getItem("LoggedUser")),accdetails:JSON.parse(localStorage.getItem("UserMianFosa")),token:JSON.parse(localStorage.getItem("Token")),recv_acc_no:"",recv_acc_name:"",cost:"",final:{},accounts:JSON.parse(localStorage.getItem("UserFosas")),loading:!1,processingError:!1,canProcess:!1,isInternal:!1,isBosa:!1,isExternal:!1,showConfirmModal:!1,config:{size:80,duration:1500},spinnersColor:this.$themes.secondary,currentDuration:1500,sliderDuration:{min:1e3,max:2e3},formdata:{amount:"",id_no:"",user:"",type:"",acc_code:""},amountErrors:[],accErrors:"",idErrors:[],accError:!1,TransferTypes:[{id:"internal",description:"KENSA to Others Accounts(e.g KENHOL)"},{id:"bosa",description:"KENSA to Bosa"},{id:"external",description:"My KENSA to Other Members KENSA"}]}},computed:{speed:function(){return this.sliderDuration.min+this.sliderDuration.max-this.currentDuration},formReady:function(){return!this.amountErrors.length&&!this.idErrors.length&&!this.accError}},methods:{getSelected:function(t){return console.log(t),this.accounts.find((function(e){return e.paybill_code.toLowerCase()==t.toLowerCase()}))},setSelected:function(t){var e=t.id;"internal"==e&&(this.isInternal=!0,this.isExternal=!1,this.isBosa=!1,this.accounts=JSON.parse(localStorage.getItem("UserFosas"))),"bosa"==e&&(this.isInternal=!1,this.isExternal=!1,this.isBosa=!0,this.accounts=JSON.parse(localStorage.getItem("UserBosas")),console.log(this.accounts)),"external"==e&&(this.isInternal=!1,this.isExternal=!0,this.isBosa=!1)},onsubmit:function(){if(this.processingError=!1,this.amountErrors=this.formdata.amount?[]:["Amount is required"],this.isExternal&&(this.idErrors=this.formdata.id_no?[]:["ID No is required"]),(this.isInternal||this.isBosa)&&(this.accError=!this.formdata.acc_code.paybill_code,this.accErrors=this.formdata.acc_code.paybill_code?null:"Please Select an Account",this.accError=this.formdata.acc_code.paybill_code==this.accdetails.paybill_code,this.accErrors=this.formdata.acc_code.paybill_code!=this.accdetails.paybill_code?null:"Can't Transfer Funds to Your Main Account"),this.formReady){var t="";(this.isInternal||this.isBosa)&&(this.acc_details=this.getSelected(this.formdata.acc_code.paybill_code),t=this.acc_details.paybill_code),this.loading=!0;var e={amount:this.formdata.amount,id_no:this.formdata.id_no,user:this.userData.user_id,type:this.formdata.type.id,acc_code:t},a=this,r={headers:{Authorization:this.userData.user_id+" "+this.token}};i.a.post("".concat(this.$apiUrl,"GetTransferCharge"),e,r).then((function(t){a.loading=!1;var e=t.data;a.final=e,a.recv_acc_no=a.isExternal?e.acc_details.accno:e.acc_details.acc_number,a.recv_acc_name=a.isExternal?e.acc_details.accname:e.acc_details.acc_name,a.cost=e.amount,a.showConfirmModal=!0})).catch((function(t){console.log(t)}))}},FinalPost:function(){var t=this,e={headers:{Authorization:this.userData.user_id+" "+this.token}};i.a.post("".concat(this.$apiUrl,"FundsTransferFosa"),this.final,e).then((function(e){t.loading=!1;var a=e.data;"1"==a.response.success?t.showToast("Transfer Processed succefully",{position:"bottom-right",icon:"fa-check",duration:2500}):t.processingError=!0})).catch((function(t){console.log(t)}))}},created:function(){this.canProcess=1==this.userData.is_registered_mobile_user}},m=u,f=a("2877"),h=Object(f["a"])(m,r,s,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0ccbda.392ac394.js.map